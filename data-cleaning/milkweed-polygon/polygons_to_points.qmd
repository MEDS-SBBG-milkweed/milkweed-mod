---
title: "Polygons to points"
format: html
---

```{r}
library(tidyverse)
library(janitor)
library(sf)
library(ggspatial)
library(terra)
library(here)
library(raster)
library(leaflet)
```

```{r}
milkweed_data_raw <- st_read(here("~/../../capstone/milkweedmod/data/milkweed_polygon_data/"))

# remove "No" observations
milkweed_presence <- milkweed_data_raw |> 
  janitor::clean_names() |> 
  filter(milkweed_p != "no")  %>%
  st_transform("EPSG:4326")

# read in bioclim raster
envs_Ac <- brick(here::here("~/../../capstone/milkweedmod/data/bioclim/wallace_bioclim.tif"))
```

```{r}
bbox <- st_bbox(milkweed_presence)
env_crop <- crop(envs_Ac, bbox)
```

```{r}
leaflet() %>% addProviderTiles(providers$Esri.WorldTopoMap) %>%
  addPolygons(data = milkweed_presence,
              weight = 4, color = "blue", group = 'proj') %>%
  addRasterImage(env_crop$wallace_bioclim_1, opacity = 0.7)
```

- so...the polygons do not go over multiple raster cells
